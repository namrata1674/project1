(this.webpackJsonp=this.webpackJsonp||[]).push([[9],{"4wgn":function(e,i,t){"use strict";t.d(i,"a",(function(){return n})),t.d(i,"b",(function(){return a})),t.d(i,"c",(function(){return r})),t.d(i,"d",(function(){return s})),t.d(i,"e",(function(){return o})),t.d(i,"f",(function(){return d})),t.d(i,"g",(function(){return u})),t.d(i,"h",(function(){return l})),t.d(i,"i",(function(){return c}));const n=3,a="Ci::Runner",r="Group",s="Issue",o="Iteration",d="MergeRequest",u="Milestone",l="Project",c="User"},C5Lz:function(e,i){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"sidebarDetails"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"fullPath"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"iid"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"project"},arguments:[{kind:"Argument",name:{kind:"Name",value:"fullPath"},value:{kind:"Variable",name:{kind:"Name",value:"fullPath"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"issue"},arguments:[{kind:"Argument",name:{kind:"Name",value:"iid"},value:{kind:"Variable",name:{kind:"Name",value:"iid"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"iid"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:132}};t.loc.source={body:"query sidebarDetails($fullPath: ID!, $iid: String!) {\n  project(fullPath: $fullPath) {\n    issue(iid: $iid) {\n      iid\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function a(e,i){for(var t=0;t<e.definitions.length;t++){var n=e.definitions[t];if(n.name&&n.name.value==i)return n}}t.definitions.forEach((function(e){if(e.name){var i=new Set;!function e(i,t){if("FragmentSpread"===i.kind)t.add(i.name.value);else if("VariableDefinition"===i.kind){var n=i.type;"NamedType"===n.kind&&t.add(n.name.value)}i.selectionSet&&i.selectionSet.selections.forEach((function(i){e(i,t)})),i.variableDefinitions&&i.variableDefinitions.forEach((function(i){e(i,t)})),i.definitions&&i.definitions.forEach((function(i){e(i,t)}))}(e,i),n[e.name.value]=i}})),e.exports=t,e.exports.sidebarDetails=function(e,i){var t={kind:e.kind,definitions:[a(e,i)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var r=n[i]||new Set,s=new Set,o=new Set;for(r.forEach((function(e){o.add(e)}));o.size>0;){var d=o;o=new Set,d.forEach((function(e){s.has(e)||(s.add(e),(n[e]||new Set).forEach((function(e){o.add(e)})))}))}return s.forEach((function(i){var n=a(e,i);n&&t.definitions.push(n)})),t}(t,"sidebarDetails")},Eywz:function(e,i){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mergeRequestToggleAttentionRequested"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"projectPath"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"iid"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"userId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mergeRequestToggleAttentionRequested"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"projectPath"},value:{kind:"Variable",name:{kind:"Name",value:"projectPath"}}},{kind:"ObjectField",name:{kind:"Name",value:"iid"},value:{kind:"Variable",name:{kind:"Name",value:"iid"}}},{kind:"ObjectField",name:{kind:"Name",value:"userId"},value:{kind:"Variable",name:{kind:"Name",value:"userId"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"errors"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:228}};t.loc.source={body:"mutation mergeRequestToggleAttentionRequested($projectPath: ID!, $iid: String!, $userId: ID!) {\n  mergeRequestToggleAttentionRequested(\n    input: { projectPath: $projectPath, iid: $iid, userId: $userId }\n  ) {\n    errors\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function a(e,i){for(var t=0;t<e.definitions.length;t++){var n=e.definitions[t];if(n.name&&n.name.value==i)return n}}t.definitions.forEach((function(e){if(e.name){var i=new Set;!function e(i,t){if("FragmentSpread"===i.kind)t.add(i.name.value);else if("VariableDefinition"===i.kind){var n=i.type;"NamedType"===n.kind&&t.add(n.name.value)}i.selectionSet&&i.selectionSet.selections.forEach((function(i){e(i,t)})),i.variableDefinitions&&i.variableDefinitions.forEach((function(i){e(i,t)})),i.definitions&&i.definitions.forEach((function(i){e(i,t)}))}(e,i),n[e.name.value]=i}})),e.exports=t,e.exports.mergeRequestToggleAttentionRequested=function(e,i){var t={kind:e.kind,definitions:[a(e,i)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var r=n[i]||new Set,s=new Set,o=new Set;for(r.forEach((function(e){o.add(e)}));o.size>0;){var d=o;o=new Set,d.forEach((function(e){s.has(e)||(s.add(e),(n[e]||new Set).forEach((function(e){o.add(e)})))}))}return s.forEach((function(i){var n=a(e,i);n&&t.definitions.push(n)})),t}(t,"mergeRequestToggleAttentionRequested")},FxFN:function(e,i,t){"use strict";t.d(i,"f",(function(){return r})),t.d(i,"e",(function(){return s})),t.d(i,"a",(function(){return o})),t.d(i,"c",(function(){return d})),t.d(i,"d",(function(){return u})),t.d(i,"b",(function(){return l}));t("S26F");var n=t("P/Kr"),a=t.n(n);const r=function(e){return!("string"!=typeof e||!e.startsWith("gid://gitlab/"))},s=function(e=""){const i=function(e){return parseInt(`${e}`.replace(/gid:\/\/gitlab\/.*\//g,""),10)}(e);return Number.isInteger(i)?i:null},o={Append:"APPEND",Remove:"REMOVE",Replace:"REPLACE"},d=function(e,i){if("string"!=typeof e)throw new TypeError(`type must be a string; got ${typeof e}`);if(!["number","string"].includes(typeof i))throw new TypeError(`id must be a number or string; got ${typeof i}`);return r(i)?i:`gid://gitlab/${e}/${i}`},u=function(e,i){return i.map((function(i){return d(e,i)}))},l=function(e){if(!a()(e))throw new TypeError(`nodes must be an array; got ${typeof e}`);return e.map((function(e){return e.id?{...e,id:s(e.id)}:e}))}},LxrP:function(e,i){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"mergeRequestSidebarDetails"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"fullPath"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"iid"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"project"},arguments:[{kind:"Argument",name:{kind:"Name",value:"fullPath"},value:{kind:"Variable",name:{kind:"Name",value:"fullPath"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mergeRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"iid"},value:{kind:"Variable",name:{kind:"Name",value:"iid"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"iid"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:171}};t.loc.source={body:"query mergeRequestSidebarDetails($fullPath: ID!, $iid: String!) {\n  project(fullPath: $fullPath) {\n    mergeRequest(iid: $iid) {\n      iid # currently unused.\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function a(e,i){for(var t=0;t<e.definitions.length;t++){var n=e.definitions[t];if(n.name&&n.name.value==i)return n}}t.definitions.forEach((function(e){if(e.name){var i=new Set;!function e(i,t){if("FragmentSpread"===i.kind)t.add(i.name.value);else if("VariableDefinition"===i.kind){var n=i.type;"NamedType"===n.kind&&t.add(n.name.value)}i.selectionSet&&i.selectionSet.selections.forEach((function(i){e(i,t)})),i.variableDefinitions&&i.variableDefinitions.forEach((function(i){e(i,t)})),i.definitions&&i.definitions.forEach((function(i){e(i,t)}))}(e,i),n[e.name.value]=i}})),e.exports=t,e.exports.mergeRequestSidebarDetails=function(e,i){var t={kind:e.kind,definitions:[a(e,i)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var r=n[i]||new Set,s=new Set,o=new Set;for(r.forEach((function(e){o.add(e)}));o.size>0;){var d=o;o=new Set,d.forEach((function(e){s.has(e)||(s.add(e),(n[e]||new Set).forEach((function(e){o.add(e)})))}))}return s.forEach((function(i){var n=a(e,i);n&&t.definitions.push(n)})),t}(t,"mergeRequestSidebarDetails")},"Ru/N":function(e,i){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"mergeRequestRequestRereview"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"projectPath"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"iid"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"userId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mergeRequestReviewerRereview"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"projectPath"},value:{kind:"Variable",name:{kind:"Name",value:"projectPath"}}},{kind:"ObjectField",name:{kind:"Name",value:"iid"},value:{kind:"Variable",name:{kind:"Name",value:"iid"}}},{kind:"ObjectField",name:{kind:"Name",value:"userId"},value:{kind:"Variable",name:{kind:"Name",value:"userId"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"errors"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:203}};t.loc.source={body:"mutation mergeRequestRequestRereview($projectPath: ID!, $iid: String!, $userId: ID!) {\n  mergeRequestReviewerRereview(input: { projectPath: $projectPath, iid: $iid, userId: $userId }) {\n    errors\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function a(e,i){for(var t=0;t<e.definitions.length;t++){var n=e.definitions[t];if(n.name&&n.name.value==i)return n}}t.definitions.forEach((function(e){if(e.name){var i=new Set;!function e(i,t){if("FragmentSpread"===i.kind)t.add(i.name.value);else if("VariableDefinition"===i.kind){var n=i.type;"NamedType"===n.kind&&t.add(n.name.value)}i.selectionSet&&i.selectionSet.selections.forEach((function(i){e(i,t)})),i.variableDefinitions&&i.variableDefinitions.forEach((function(i){e(i,t)})),i.definitions&&i.definitions.forEach((function(i){e(i,t)}))}(e,i),n[e.name.value]=i}})),e.exports=t,e.exports.mergeRequestRequestRereview=function(e,i){var t={kind:e.kind,definitions:[a(e,i)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var r=n[i]||new Set,s=new Set,o=new Set;for(r.forEach((function(e){o.add(e)}));o.size>0;){var d=o;o=new Set,d.forEach((function(e){s.has(e)||(s.add(e),(n[e]||new Set).forEach((function(e){o.add(e)})))}))}return s.forEach((function(i){var n=a(e,i);n&&t.definitions.push(n)})),t}(t,"mergeRequestRequestRereview")},jz1Q:function(e,i,t){"use strict";t.d(i,"a",(function(){return n}));class n{constructor(e){return n.singleton||this.initSingleton(e),n.singleton}initSingleton(e){const{currentUser:i,rootPath:t,editable:a,timeTrackingLimitToHours:r}=e;this.currentUser=i,this.rootPath=t,this.editable=a,this.timeEstimate=0,this.totalTimeSpent=0,this.humanTimeEstimate="",this.humanTimeSpent="",this.timeTrackingLimitToHours=r,this.assignees=[],this.reviewers=[],this.isFetching={assignees:!0,reviewers:!0},this.isLoading={},this.autocompleteProjects=[],this.moveToProjectId=0,this.isLockDialogOpen=!1,this.participants=[],this.projectEmailsDisabled=!1,this.subscribeDisabledDescription="",this.subscribed=null,this.changing=!1,n.singleton=this}setAssigneeData({assignees:e}){this.isFetching.assignees=!1,e&&(this.assignees=e)}setReviewerData({reviewers:e}){this.isFetching.reviewers=!1,e&&(this.reviewers=e)}resetChanging(){this.changing=!1}setTimeTrackingData(e){this.timeEstimate=e.time_estimate,this.totalTimeSpent=e.total_time_spent,this.humanTimeEstimate=e.human_time_estimate,this.humanTotalTimeSpent=e.human_total_time_spent}setFetchingState(e,i){this.isFetching[e]=i}setLoadingState(e,i){this.isLoading[e]=i}addAssignee(e){this.findAssignee(e)||(this.changing=!0,this.assignees.push(e))}addReviewer(e){this.findReviewer(e)||this.reviewers.push(e)}updateAssignee(e,i){const t=this.findAssignee({id:e});t&&(t[i]=!t[i])}updateReviewer(e,i){const t=this.findReviewer({id:e});t&&(t[i]=!t[i])}findAssignee(e){return this.assignees.find((function({id:i}){return i===e.id}))}findReviewer(e){return this.reviewers.find((function({id:i}){return i===e.id}))}removeAssignee(e){e&&(this.changing=!0,this.assignees=this.assignees.filter((function({id:i}){return i!==e.id})))}removeReviewer(e){e&&(this.reviewers=this.reviewers.filter((function({id:i}){return i!==e.id})))}removeAllAssignees(){this.changing=!0,this.assignees=[]}removeAllReviewers(){this.reviewers=[]}setAssigneesFromRealtime(e){this.assignees=e}setAutocompleteProjects(e){this.autocompleteProjects=e}setSubscribedState(e){this.subscribed=e}setMoveToProjectId(e){this.moveToProjectId=e}}},uyVa:function(e,i,t){"use strict";t.d(i,"a",(function(){return y}));var n=t("jz1Q"),a=t("XRO8"),r=t("/lV4"),s=t("udiD"),o=t("3twG"),d=t("C5Lz"),u=t.n(d),l=t("4wgn"),c=t("FxFN"),m=t("5v28"),f=t("2ibD"),v=t("Ru/N"),h=t.n(v),p=t("LxrP"),k=t.n(p),g=t("Eywz"),b=t.n(g);const N={merge_request:k.a,issue:u.a},S=Object(m.default)({},{fetchPolicy:m.fetchPolicies.NO_CACHE});class w{constructor(e){return w.singleton||(this.endpoint=e.endpoint,this.moveIssueEndpoint=e.moveIssueEndpoint,this.projectsAutocompleteEndpoint=e.projectsAutocompleteEndpoint,this.fullPath=e.fullPath,this.iid=e.iid,this.issuableType=e.issuableType,w.singleton=this),w.singleton}get(){return Promise.all([f.a.get(this.endpoint),S.query({query:this.sidebarDetailsQuery(),variables:{fullPath:this.fullPath,iid:this.iid.toString()}})])}sidebarDetailsQuery(){return N[this.issuableType]}update(e,i){return f.a.put(this.endpoint,{[e]:i})}updateWithGraphQl(e,i){return S.mutate({mutation:e,variables:{...i,projectPath:this.fullPath,iid:this.iid.toString()}})}getProjectsAutocomplete(e){return f.a.get(this.projectsAutocompleteEndpoint,{params:{search:e}})}moveIssue(e){return f.a.post(this.moveIssueEndpoint,{move_to_project_id:e})}requestReview(e){return S.mutate({mutation:h.a,variables:{userId:Object(c.c)(l.i,`${e}`),projectPath:this.fullPath,iid:this.iid.toString()}})}toggleAttentionRequested(e){return S.mutate({mutation:b.a,variables:{userId:Object(c.c)(l.i,`${e}`),projectPath:this.fullPath,iid:this.iid.toString()}})}}class y{constructor(e){return y.singleton||this.initSingleton(e),y.singleton}initSingleton(e){this.store=new n.a(e),this.service=new w({endpoint:e.endpoint,moveIssueEndpoint:e.moveIssueEndpoint,projectsAutocompleteEndpoint:e.projectsAutocompleteEndpoint,fullPath:e.fullPath,iid:e.iid,issuableType:e.issuableType}),y.singleton=this}assignYourself(){this.store.addAssignee(this.store.currentUser)}saveAssignees(e){const i=this.store.assignees.map((function(e){return e.id})),t={assignee_ids:0===i.length?[0]:i};return this.service.update(e,t)}saveReviewers(e){const i=this.store.reviewers.map((function(e){return e.id})),t={reviewer_ids:0===i.length?[0]:i};return this.service.update(e,t)}requestReview({userId:e,callback:i}){var t=this;return this.service.requestReview(e).then((function(){t.store.updateReviewer(e,"reviewed"),Object(s.a)(Object(r.a)("Requested review")),i(e,!0)})).catch((function(){return i(e,!1)}))}async toggleAttentionRequested(e,{user:i,callback:t}){var n=this;try{const n="reviewer"===e?this.store.findReviewer(i):this.store.findAssignee(i);await this.service.toggleAttentionRequested(i.id),n.attention_requested?Object(s.a)(Object(r.g)(Object(r.a)("Removed attention request from @%{username}"),{username:i.username})):Object(s.a)(Object(r.g)(Object(r.a)("Requested attention from @%{username}"),{username:i.username})),this.store.updateReviewer(i.id,"attention_requested"),this.store.updateAssignee(i.id,"attention_requested"),t()}catch(s){t(),Object(a.c)({message:Object(r.g)(Object(r.a)("Updating the attention request for %{username} failed."),{username:i.username}),error:s,captureError:!0,actionConfig:{title:Object(r.a)("Try again"),clickHandler:function(){return n.toggleAttentionRequired(e,{user:i,callback:t})}}})}}setMoveToProjectId(e){this.store.setMoveToProjectId(e)}fetch(){var e=this;return this.service.get().then((function([i,t]){e.processFetchedData(i.data,t.data)})).catch((function(){return Object(a.c)({message:Object(r.a)("Error occurred when fetching sidebar data")})}))}processFetchedData(e){this.store.setAssigneeData(e),this.store.setReviewerData(e),this.store.setTimeTrackingData(e)}fetchAutocompleteProjects(e){var i=this;return this.service.getProjectsAutocomplete(e).then((function({data:e}){return i.store.setAutocompleteProjects(e),i.store.autocompleteProjects}))}moveIssue(){return this.service.moveIssue(this.store.moveToProjectId).then((function({data:e}){window.location.pathname!==e.web_url&&Object(o.K)(e.web_url)}))}}}}]);
//# sourceMappingURL=commons-initGFMInput-pages.admin.topics.edit-pages.admin.topics.new-pages.groups.milestones.edit-pag-07fb7343.f48821f2.chunk.js.map